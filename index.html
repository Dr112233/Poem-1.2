<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<title>≈ûeirl…ôr & Hekay…ôl…ôr</title>

<style>
body{
  margin:0;
  background:black;
  color:#e5e7eb;
  font-family:Georgia,serif;
}
.neon{
  color:#22d3ee;
  text-shadow:0 0 10px #22d3ee,0 0 20px #22d3ee;
}
.center{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.box{
  border:2px solid #22d3ee;
  box-shadow:0 0 25px #22d3ee;
  padding:30px;
  border-radius:15px;
  width:90%;
  max-width:900px;
}
input,textarea{
  width:100%;
  background:black;
  color:white;
  border:1px solid #22d3ee;
  padding:10px;
  border-radius:8px;
  margin-bottom:10px;
}
button{
  background:black;
  color:#22d3ee;
  border:1px solid #22d3ee;
  padding:10px 25px;
  border-radius:25px;
  cursor:pointer;
  margin:5px;
}
button:hover{
  background:#22d3ee;
  color:black;
}
.card{
  border:1px solid #22d3ee;
  box-shadow:0 0 15px #22d3ee;
  padding:20px;
  border-radius:15px;
  margin-top:20px;
  position:relative;
}
.actions{
  margin-top:15px;
  text-align:right;
}
.edit-form{
  margin-top:15px;
  padding:15px;
  border:1px dashed #22d3ee;
  border-radius:10px;
}
.hidden{display:none;}
.delete-btn{
  background:#8b0000;
  color:white;
}
.delete-btn:hover{
  background:#ff0000;
}
.edit-btn{
  background:#004466;
  color:white;
}
.edit-btn:hover{
  background:#22d3ee;
}
</style>
</head>

<body>

<!-- üîê Gƒ∞Rƒ∞≈û -->
<div id="login" class="center">
  <div class="box">
    <h2 class="neon">üîê Giri≈ü Kodu</h2>
    <input id="code" type="password" placeholder="Kodu yaz">
    <button onclick="login()">Daxil ol</button>
  </div>
</div>

<!-- üìö SAYT -->
<div id="site" class="center hidden">
  <div class="box">

    <h1 class="neon">üìú ≈ûeirl…ôr</h1>
    <input id="pTitle" placeholder="Ba≈ülƒ±q">
    <textarea id="pText" rows="4" placeholder="≈ûeir..."></textarea>
    <button onclick="addPoem()">∆èlav…ô et</button>
    <div id="poems"></div>

    <hr style="margin:40px 0;border-color:#22d3ee">

    <h1 class="neon">üìñ Hekay…ôl…ôr</h1>
    <input id="sTitle" placeholder="Ba≈ülƒ±q">
    <textarea id="sText" rows="6" placeholder="Hekay…ô..."></textarea>
    <button onclick="addStory()">∆èlav…ô et</button>
    <div id="stories"></div>

  </div>
</div>

<script>
/* üîê LOGIN */
function login(){
  if(code.value==="melek2007"){
    loginDiv.style.display="none";
    site.classList.remove("hidden");
    draw();
  }else alert("Yanlƒ±≈ü kod!");
}

/* DATA */
let poems=JSON.parse(localStorage.poems||"[]");
let stories=JSON.parse(localStorage.stories||"[]");

/* ADD */
function addPoem(){
  if(!pTitle.value.trim() || !pText.value.trim()){
    alert("Ba≈ülƒ±q v…ô m…ôzmunu doldurun!");
    return;
  }
  poems.unshift({t:pTitle.value,c:pText.value});
  localStorage.poems=JSON.stringify(poems);
  pTitle.value="";pText.value="";
  draw();
}
function addStory(){
  if(!sTitle.value.trim() || !sText.value.trim()){
    alert("Ba≈ülƒ±q v…ô m…ôzmunu doldurun!");
    return;
  }
  stories.unshift({t:sTitle.value,c:sText.value});
  localStorage.stories=JSON.stringify(stories);
  sTitle.value="";sText.value="";
  draw();
}

/* DELETE */
function deletePoem(index){
  if(confirm("Bu ≈üeiri silm…ôk ist…ôdiyiniz…ô …ôminsiniz?")){
    poems.splice(index,1);
    localStorage.poems=JSON.stringify(poems);
    draw();
  }
}

function deleteStory(index){
  if(confirm("Bu hekay…ôni silm…ôk ist…ôdiyiniz…ô …ôminsiniz?")){
    stories.splice(index,1);
    localStorage.stories=JSON.stringify(stories);
    draw();
  }
}

/* EDIT */
let editingPoemIndex = -1;
let editingStoryIndex = -1;

function editPoem(index){
  editingPoemIndex = index;
  const poem = poems[index];
  draw();
}

function saveEditedPoem(){
  const title = document.getElementById('editPoemTitle').value;
  const content = document.getElementById('editPoemText').value;
  
  if(!title.trim() || !content.trim()){
    alert("Ba≈ülƒ±q v…ô m…ôzmunu doldurun!");
    return;
  }
  
  poems[editingPoemIndex] = {t: title, c: content};
  localStorage.poems=JSON.stringify(poems);
  editingPoemIndex = -1;
  draw();
}

function cancelEditPoem(){
  editingPoemIndex = -1;
  draw();
}

function editStory(index){
  editingStoryIndex = index;
  const story = stories[index];
  draw();
}

function saveEditedStory(){
  const title = document.getElementById('editStoryTitle').value;
  const content = document.getElementById('editStoryText').value;
  
  if(!title.trim() || !content.trim()){
    alert("Ba≈ülƒ±q v…ô m…ôzmunu doldurun!");
    return;
  }
  
  stories[editingStoryIndex] = {t: title, c: content};
  localStorage.stories=JSON.stringify(stories);
  editingStoryIndex = -1;
  draw();
}

function cancelEditStory(){
  editingStoryIndex = -1;
  draw();
}

/* DRAW */
function draw(){
  poemsDiv.innerHTML="";
  poems.forEach((x,index)=>{
    if(editingPoemIndex === index){
      poemsDiv.innerHTML+=`
        <div class="card">
          <h3 class="neon">≈ûeiri redakt…ô et</h3>
          <div class="edit-form">
            <input id="editPoemTitle" value="${x.t.replace(/"/g, '&quot;')}" placeholder="Ba≈ülƒ±q">
            <textarea id="editPoemText" rows="4" placeholder="≈ûeir...">${x.c}</textarea>
            <div class="actions">
              <button onclick="saveEditedPoem()">Yadda saxla</button>
              <button onclick="cancelEditPoem()">L…ôƒüv et</button>
            </div>
          </div>
        </div>
      `;
    }else{
      poemsDiv.innerHTML+=`
        <div class="card">
          <h3 class="neon">${x.t}</h3>
          <p style="white-space: pre-line;">${x.c}</p>
          <div class="actions">
            <button class="edit-btn" onclick="editPoem(${index})">D√ºz…ôli≈ü et</button>
            <button class="delete-btn" onclick="deletePoem(${index})">Sil</button>
          </div>
        </div>
      `;
    }
  });
  
  storiesDiv.innerHTML="";
  stories.forEach((x,index)=>{
    if(editingStoryIndex === index){
      storiesDiv.innerHTML+=`
        <div class="card">
          <h3 class="neon">Hekay…ôni redakt…ô et</h3>
          <div class="edit-form">
            <input id="editStoryTitle" value="${x.t.replace(/"/g, '&quot;')}" placeholder="Ba≈ülƒ±q">
            <textarea id="editStoryText" rows="6" placeholder="Hekay…ô...">${x.c}</textarea>
            <div class="actions">
              <button onclick="saveEditedStory()">Yadda saxla</button>
              <button onclick="cancelEditStory()">L…ôƒüv et</button>
            </div>
          </div>
        </div>
      `;
    }else{
      storiesDiv.innerHTML+=`
        <div class="card">
          <h3 class="neon">${x.t}</h3>
          <p style="white-space: pre-line;">${x.c}</p>
          <div class="actions">
            <button class="edit-btn" onclick="editStory(${index})">D√ºz…ôli≈ü et</button>
            <button class="delete-btn" onclick="deleteStory(${index})">Sil</button>
          </div>
        </div>
      `;
    }
  });
}

/* SHORT */
const loginDiv=document.getElementById("login");
const poemsDiv=document.getElementById("poems");
const storiesDiv=document.getElementById("stories");
</script>

</body>
</html>
